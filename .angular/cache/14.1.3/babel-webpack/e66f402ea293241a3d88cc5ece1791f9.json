{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { map, finalize } from 'rxjs/operators';\nlet HomeComponent = class HomeComponent {\n  constructor(olympicService, router) {\n    this.olympicService = olympicService;\n    this.router = router;\n    this.chartData = [];\n    this.numberOfJOs = 0;\n    this.numberOfCountries = 0;\n    this.isLoading = false;\n    this.errorMessage = null;\n\n    this.tooltipText = item => {\n      const label = item.data.name;\n      const val = item.data.value;\n      return `${label} ${val}`;\n    };\n  }\n\n  ngOnInit() {\n    this.isLoading = true;\n    this.olympicService.loadInitialData().pipe(map(countries => {\n      // ... traitement des données ...\n      return countries;\n    }), finalize(() => this.isLoading = false)).subscribe({\n      next: countries => {\n        if (countries) {\n          this.numberOfJOs = this.calculateNumberOfJOs(countries);\n          this.numberOfCountries = countries.length;\n          this.chartData = countries.map(country => ({\n            name: country.country,\n            value: country.participations.reduce((total, participation) => total + participation.medalsCount, 0)\n          }));\n        }\n      },\n      error: error => {\n        console.error('Error loading data:', error);\n        this.isLoading = false;\n        this.errorMessage = 'Failed to load data: ' + (error.message || 'Unknown error');\n      }\n    });\n  }\n\n  calculateNumberOfJOs(countries) {\n    const yearsOfJOs = [];\n    countries.forEach(olympic => {\n      olympic.participations.forEach(participation => {\n        if (!yearsOfJOs.includes(participation.year)) {\n          yearsOfJOs.push(participation.year);\n        }\n      });\n    });\n    return yearsOfJOs.length;\n  }\n\n  onChartClick(event) {\n    if (event && event.name) {\n      this.router.navigate([`/details/${event.name}`]);\n    }\n  }\n\n};\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})], HomeComponent);\nexport { HomeComponent };\n/*\n\n* Décorateur @Component : Définit les métadonnées du composant, telles que le template HTML, le style, et le sélecteur.\n* Classe du Composant : Définit le comportement du composant, incluant les propriétés et les méthodes.\n*\tObservable olympics$ : Gère les données asynchrones des pays olympiques.\n*\tInjection de OlympicService : Fournit les données nécessaires au composant\n* ngOnInit : Initialise le composant en s'abonnant aux données olympiques\n\n* Le symbole $ après le nom olympics dans olympics$ est une convention de nommage couramment utilisée dans la communauté Angular et RxJS pour indiquer qu'une variable est un Observable.\n\n*\nCe composant, en résumé, est conçu pour afficher des données olympiques en s'abonnant à un service qui les fournit via un Observable.\n\n*/","map":{"version":3,"mappings":";AAAA,SAASA,SAAT,QAAkC,eAAlC;AAIA,SAASC,GAAT,EAAcC,QAAd,QAA8B,gBAA9B;AASA,IAAaC,aAAa,GAA1B,MAAaA,aAAb,CAA0B;EASxBC,YAAoBC,cAApB,EAA4DC,MAA5D,EAA0E;IAAtD;IAAwC;IAPrD,iBAAmB,EAAnB;IAEA,mBAAsB,CAAtB;IACA,yBAA4B,CAA5B;IACP,iBAAqB,KAArB;IACA,oBAA8B,IAA9B;;IAiDA,mBAAeC,IAAD,IAAsB;MAClC,MAAMC,KAAK,GAAGD,IAAI,CAACE,IAAL,CAAUC,IAAxB;MACA,MAAMC,GAAG,GAAGJ,IAAI,CAACE,IAAL,CAAUG,KAAtB;MACA,OAAO,GAAGJ,KAAK,IAAIG,GAAG,EAAtB;IACD,CAJD;EA/C8E;;EAE9EE,QAAQ;IACN,KAAKC,SAAL,GAAiB,IAAjB;IACA,KAAKT,cAAL,CAAoBU,eAApB,GAAsCC,IAAtC,CACEf,GAAG,CAAEgB,SAAD,IAAgC;MAClC;MACA,OAAOA,SAAP;IACD,CAHE,CADL,EAKEf,QAAQ,CAAC,MAAM,KAAKY,SAAL,GAAiB,KAAxB,CALV,EAMEI,SANF,CAMY;MACVC,IAAI,EAAGF,SAAD,IAAc;QAClB,IAAIA,SAAJ,EAAe;UACb,KAAKG,WAAL,GAAmB,KAAKC,oBAAL,CAA0BJ,SAA1B,CAAnB;UACA,KAAKK,iBAAL,GAAyBL,SAAS,CAACM,MAAnC;UACA,KAAKC,SAAL,GAAiBP,SAAS,CAAChB,GAAV,CAAcwB,OAAO,KAAK;YACzCf,IAAI,EAAEe,OAAO,CAACA,OAD2B;YAEzCb,KAAK,EAAEa,OAAO,CAACC,cAAR,CAAuBC,MAAvB,CAA8B,CAACC,KAAD,EAAQC,aAAR,KAA0BD,KAAK,GAAGC,aAAa,CAACC,WAA9E,EAA2F,CAA3F;UAFkC,CAAL,CAArB,CAAjB;QAID;MACF,CAVS;MAWVC,KAAK,EAAGA,KAAD,IAAU;QACfC,OAAO,CAACD,KAAR,CAAc,qBAAd,EAAqCA,KAArC;QACA,KAAKjB,SAAL,GAAiB,KAAjB;QACA,KAAKmB,YAAL,GAAoB,2BAA2BF,KAAK,CAACG,OAAN,IAAiB,eAA5C,CAApB;MACD;IAfS,CANZ;EAuBD;;EAEOb,oBAAoB,CAACJ,SAAD,EAA4B;IACtD,MAAMkB,UAAU,GAAa,EAA7B;IACAlB,SAAS,CAACmB,OAAV,CAAmBC,OAAD,IAAY;MAC5BA,OAAO,CAACX,cAAR,CAAuBU,OAAvB,CAAgCP,aAAD,IAAkB;QAC/C,IAAI,CAACM,UAAU,CAACG,QAAX,CAAoBT,aAAa,CAACU,IAAlC,CAAL,EAA8C;UAC5CJ,UAAU,CAACK,IAAX,CAAgBX,aAAa,CAACU,IAA9B;QACD;MACF,CAJD;IAKD,CAND;IAOA,OAAOJ,UAAU,CAACZ,MAAlB;EACD;;EAEDkB,YAAY,CAACC,KAAD,EAAW;IACrB,IAAIA,KAAK,IAAIA,KAAK,CAAChC,IAAnB,EAAyB;MACvB,KAAKJ,MAAL,CAAYqC,QAAZ,CAAqB,CAAC,YAAYD,KAAK,CAAChC,IAAI,EAAvB,CAArB;IACD;EACF;;AAtDuB,CAA1B;AAAaP,aAAa,eALzBH,SAAS,CAAC;EACT4C,QAAQ,EAAE,UADD;EAETC,WAAW,EAAE,uBAFJ;EAGTC,SAAS,EAAE,CAAC,uBAAD;AAHF,CAAD,CAKgB,GAAb3C,aAAa,CAAb;SAAAA;AA+Db","names":["Component","map","finalize","HomeComponent","constructor","olympicService","router","item","label","data","name","val","value","ngOnInit","isLoading","loadInitialData","pipe","countries","subscribe","next","numberOfJOs","calculateNumberOfJOs","numberOfCountries","length","chartData","country","participations","reduce","total","participation","medalsCount","error","console","errorMessage","message","yearsOfJOs","forEach","olympic","includes","year","push","onChartClick","event","navigate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/Users/papa/Desktop/WhiteWolfWeb/PROJET-OCR-JAVA-ANGULAR/OCR-JAVA-ANGULAR-P2/TeleSport/src/app/pages/home/home.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { OlympicService } from 'src/app/core/services/olympic.service';\nimport { OlympicCountry } from 'src/app/core/models/Olympic';\nimport { map, finalize } from 'rxjs/operators';\nimport { Router } from '@angular/router';\n\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss'],\n})\nexport class HomeComponent implements OnInit {\n  public olympics$: Observable<OlympicCountry[] | null> | undefined;\n  public chartData: any[] = [];\n  public tooltipTemplate: any;\n  public numberOfJOs: number = 0;\n  public numberOfCountries: number = 0;\n  isLoading: boolean = false;\n  errorMessage: string | null = null;\n\n  constructor(private olympicService: OlympicService, private router: Router) {}\n\n  ngOnInit(): void {\n    this.isLoading = true;\n    this.olympicService.loadInitialData().pipe(\n      map((countries: OlympicCountry[]) => {\n        // ... traitement des données ...\n        return countries;\n      }),\n      finalize(() => this.isLoading = false)\n    ).subscribe({\n      next: (countries) => {\n        if (countries) {\n          this.numberOfJOs = this.calculateNumberOfJOs(countries);\n          this.numberOfCountries = countries.length;\n          this.chartData = countries.map(country => ({\n            name: country.country,\n            value: country.participations.reduce((total, participation) => total + participation.medalsCount, 0),\n          }));\n        }\n      },\n      error: (error) => {\n        console.error('Error loading data:', error);\n        this.isLoading = false;\n        this.errorMessage = 'Failed to load data: ' + (error.message || 'Unknown error');\n      }\n    });\n  }\n\n  private calculateNumberOfJOs(countries: OlympicCountry[]): number {\n    const yearsOfJOs: number[] = [];\n    countries.forEach((olympic) => {\n      olympic.participations.forEach((participation) => {\n        if (!yearsOfJOs.includes(participation.year)) {\n          yearsOfJOs.push(participation.year);\n        }\n      });\n    });\n    return yearsOfJOs.length;\n  }\n  \n  onChartClick(event: any): void {\n    if (event && event.name) {\n      this.router.navigate([`/details/${event.name}`]);\n    }\n  }\n\n  tooltipText = (item: any): string => {\n    const label = item.data.name;\n    const val = item.data.value;\n    return `${label} ${val}`;\n  };\n}\n\n/*\n\n* Décorateur @Component : Définit les métadonnées du composant, telles que le template HTML, le style, et le sélecteur.\n* Classe du Composant : Définit le comportement du composant, incluant les propriétés et les méthodes.\n*\tObservable olympics$ : Gère les données asynchrones des pays olympiques.\n*\tInjection de OlympicService : Fournit les données nécessaires au composant\n* ngOnInit : Initialise le composant en s'abonnant aux données olympiques\n\n* Le symbole $ après le nom olympics dans olympics$ est une convention de nommage couramment utilisée dans la communauté Angular et RxJS pour indiquer qu'une variable est un Observable.\n\n* \nCe composant, en résumé, est conçu pour afficher des données olympiques en s'abonnant à un service qui les fournit via un Observable.\n\n*/"]},"metadata":{},"sourceType":"module"}