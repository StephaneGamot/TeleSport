{"ast":null,"code":"import { map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/services/olympic.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@swimlane/ngx-charts\";\n\nfunction HomeComponent_div_4_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n}\n\nfunction HomeComponent_div_4_ngx_charts_pie_chart_14_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 11);\n    i0.ɵɵelement(4, \"img\", 12);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const model_r6 = ctx.model;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(model_r6.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", model_r6.value, \" \");\n  }\n}\n\nconst _c0 = function () {\n  return [1050, 600];\n};\n\nfunction HomeComponent_div_4_ngx_charts_pie_chart_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ngx-charts-pie-chart\", 8);\n    i0.ɵɵlistener(\"select\", function HomeComponent_div_4_ngx_charts_pie_chart_14_Template_ngx_charts_pie_chart_select_0_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.onChartClick($event));\n    });\n    i0.ɵɵtemplate(1, HomeComponent_div_4_ngx_charts_pie_chart_14_ng_template_1_Template, 6, 2, \"ng-template\", null, 9, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r4 = i0.ɵɵreference(2);\n\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"results\", ctx_r2.chartData)(\"view\", i0.ɵɵpureFunction0(9, _c0))(\"legend\", false)(\"labels\", true)(\"trimLabels\", false)(\"animations\", false)(\"autoScale\", true)(\"tooltipTemplate\", _r4)(\"tooltipText\", ctx_r2.tooltipText);\n  }\n}\n\nfunction HomeComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 3)(2, \"div\", 4)(3, \"div\");\n    i0.ɵɵtext(4, \"Number of JOs\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 5);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 4)(8, \"div\");\n    i0.ɵɵtext(9, \"Number of countries\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 5);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(12, HomeComponent_div_4_div_12_Template, 1, 0, \"div\", 6);\n    i0.ɵɵpipe(13, \"async\");\n    i0.ɵɵtemplate(14, HomeComponent_div_4_ngx_charts_pie_chart_14_Template, 3, 10, \"ngx-charts-pie-chart\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.numberOfJOs);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.numberOfCountries);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(13, 4, ctx_r0.olympics$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.chartData);\n  }\n}\n\nexport class HomeComponent {\n  constructor(olympicService, router) {\n    this.olympicService = olympicService;\n    this.router = router;\n    this.chartData = []; // Stocke les données transformées pour le diagramme\n\n    this.numberOfJOs = 0;\n    this.numberOfCountries = 0;\n    this.isLoading = false;\n\n    this.tooltipText = item => {\n      const label = item.data.name;\n      const val = item.data.value;\n      return `${label} ${val}`;\n    };\n  } // Le constructeur est utilisé pour l'injection de dépendances.\n\n\n  ngOnInit() {\n    this.olympics$ = this.olympicService.getOlympics().pipe(map(countries => {\n      if (countries) {\n        this.isLoading = true;\n        this.numberOfJOs = this.calculateNumberOfJOs(countries);\n        this.numberOfCountries = countries.length;\n        this.chartData = countries.map(country => ({\n          name: country.country,\n          value: country.participations.reduce((total, participation) => total + participation.medalsCount, 0)\n        }));\n      }\n\n      return countries || [];\n    }));\n  }\n\n  calculateNumberOfJOs(countries) {\n    const yearsOfJOs = [];\n    countries.forEach(olympic => {\n      olympic.participations.forEach(participation => {\n        if (!yearsOfJOs.includes(participation.year)) {\n          yearsOfJOs.push(participation.year);\n        }\n      });\n    });\n    return yearsOfJOs.length;\n  }\n\n  onChartClick(event) {\n    if (event && event.name) {\n      this.router.navigate([`/details/${event.name}`]);\n    }\n  }\n\n}\n\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.OlympicService), i0.ɵɵdirectiveInject(i2.Router));\n};\n\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  decls: 5,\n  vars: 1,\n  consts: [[1, \"homePage\"], [1, \"pageTitle\"], [4, \"ngIf\"], [1, \"pageAllSubtitles\"], [1, \"pageSubtitle\"], [1, \"numberOfSubtitle\"], [4, \"ngFor\", \"ngForOf\"], [3, \"results\", \"view\", \"legend\", \"labels\", \"trimLabels\", \"animations\", \"autoScale\", \"tooltipTemplate\", \"tooltipText\", \"select\", 4, \"ngIf\"], [3, \"results\", \"view\", \"legend\", \"labels\", \"trimLabels\", \"animations\", \"autoScale\", \"tooltipTemplate\", \"tooltipText\", \"select\"], [\"tooltipTemplate\", \"\"], [1, \"tooltip\"], [1, \"tooltipCenter\"], [\"src\", \"/assets/img/award-solid-white.svg\", \"alt\", \"award\", 1, \"white-icon\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n      i0.ɵɵtext(3, \"Medals per Country\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(4, HomeComponent_div_4_Template, 15, 6, \"div\", 2);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.PieChartComponent, i3.AsyncPipe],\n  styles: [\".homePage[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.tooltip[_ngcontent-%COMP%] {\\n  background-color: #03838f;\\n  padding: 5px;\\n  font-family: Arial, Helvetica, sans-serif;\\n  border-radius: 10px;\\n  font-size: 1rem;\\n}\\n\\n.tooltipCenter[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.white-icon[_ngcontent-%COMP%] {\\n  width: 9px;\\n  height: 16px;\\n  margin-right: 5px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvbWUuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDQyxhQUFBO0VBQ0Esc0JBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0FBQ0Q7O0FBRUE7RUFDQyx5QkFBQTtFQUNBLFlBQUE7RUFDQSx5Q0FBQTtFQUNBLG1CQUFBO0VBQ0EsZUFBQTtBQUNEOztBQUVBO0VBQ0MsYUFBQTtFQUNBLG1CQUFBO0FBQ0Q7O0FBRUE7RUFDQyxVQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0FBQ0QiLCJmaWxlIjoiaG9tZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5ob21lUGFnZSB7XG5cdGRpc3BsYXk6IGZsZXg7XG5cdGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cdGp1c3RpZnktY29udGVudDogY2VudGVyO1xuXHRhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4udG9vbHRpcCB7XG5cdGJhY2tncm91bmQtY29sb3I6ICMwMzgzOGY7XG5cdHBhZGRpbmc6IDVweDtcblx0Zm9udC1mYW1pbHk6IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7XG5cdGJvcmRlci1yYWRpdXM6IDEwcHg7XG5cdGZvbnQtc2l6ZTogMXJlbTtcbn1cblxuLnRvb2x0aXBDZW50ZXIge1xuXHRkaXNwbGF5OiBmbGV4OyBcblx0YWxpZ24taXRlbXM6IGNlbnRlcjsgXG59XG5cbi53aGl0ZS1pY29uIHtcblx0d2lkdGg6IDlweDtcblx0aGVpZ2h0OiAxNnB4O1xuXHRtYXJnaW4tcmlnaHQ6IDVweDtcblx0XG59XG5cbiJdfQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["map","i0","_r4","ctx_r2","HomeComponent","constructor","olympicService","router","item","label","data","name","val","value","ngOnInit","olympics$","getOlympics","pipe","countries","isLoading","numberOfJOs","calculateNumberOfJOs","numberOfCountries","length","chartData","country","participations","reduce","total","participation","medalsCount","yearsOfJOs","forEach","olympic","includes","year","push","onChartClick","event","navigate","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/papa/Desktop/WhiteWolfWeb/PROJET-OCR-JAVA-ANGULAR/OCR-JAVA-ANGULAR-P2/TeleSport/src/app/pages/home/home.component.ts","/Users/papa/Desktop/WhiteWolfWeb/PROJET-OCR-JAVA-ANGULAR/OCR-JAVA-ANGULAR-P2/TeleSport/src/app/pages/home/home.component.html"],"sourcesContent":["import { Component, OnInit} from '@angular/core';              // Importe les décorateurs 'Component' et 'OnInit' d'Angular Core.\nimport { Observable } from 'rxjs';                          // Importe 'Observable' de la bibliothèque RxJS pour la gestion des données asynchrones.\nimport { OlympicService } from 'src/app/core/services/olympic.service';\nimport { OlympicCountry } from 'src/app/core/models/Olympic';   // Importe l'interface 'OlympicCountry' pour définir la structure des données olympiques.\nimport { map } from 'rxjs/operators';\nimport { Router } from '@angular/router'; \n\n@Component({\n  selector: 'app-home',                                         // Sélecteur CSS pour utiliser ce composant.   Utilisé dans le HTML comme <app-home></app-home>.\n  templateUrl: './home.component.html',                         // Chemin vers le fichier de template HTML de ce composant\n  styleUrls: ['./home.component.scss'],                         // Chemin(s) vers le(s) fichier(s) de style CSS/SCSS de ce composant.\n})\n\nexport class HomeComponent implements OnInit {                  // Déclaration de la classe du composant 'HomeComponent'.\n  public olympics$: Observable<OlympicCountry[] | null> | undefined;  // Déclaration d'une propriété publique 'olympics$'. C'est un Observable qui émettra soit un tableau de 'OlympicCountry', soit 'null'. Peut être 'undefined' initialement.\n  public chartData: any[] = [];  // Stocke les données transformées pour le diagramme\n  public tooltipTemplate: any; // Assurez-vous de déclarer la propriété tooltipTemplate.\n  public numberOfJOs: number = 0;\n  public numberOfCountries: number = 0;\n  public isLoading: boolean = false;\n\n  constructor(private olympicService: OlympicService, private router: Router) {}        // Le constructeur est utilisé pour l'injection de dépendances.\n  \n  ngOnInit(): void {\n    this.olympics$ = this.olympicService.getOlympics().pipe(\n      map((countries: OlympicCountry[] | null) => {\n        if (countries) {\n          this.isLoading = true;\n          this.numberOfJOs = this.calculateNumberOfJOs(countries);\n          this.numberOfCountries = countries.length;\n          this.chartData = countries.map((country) => ({\n            name: country.country,\n            value: country.participations.reduce((total, participation) => total + participation.medalsCount, 0),\n          }));\n        }\n        return countries || [];\n      })\n    );\n  }\n\n  private calculateNumberOfJOs(countries: OlympicCountry[]): number {\n    const yearsOfJOs: number[] = [];\n    countries.forEach((olympic) => {\n      olympic.participations.forEach((participation) => {\n        if (!yearsOfJOs.includes(participation.year)) {\n          yearsOfJOs.push(participation.year);\n        }\n      });\n    });\n    return yearsOfJOs.length;\n  }\n  \n  onChartClick(event: any): void {\n    if (event && event.name) {\n      this.router.navigate([`/details/${event.name}`]);\n    }\n  }\n\n  tooltipText = (item: any): string => {\n    const label = item.data.name;\n    const val = item.data.value;\n    return `${label} ${val}`;\n  };\n}\n\n/*\n\n* Décorateur @Component : Définit les métadonnées du composant, telles que le template HTML, le style, et le sélecteur.\n* Classe du Composant : Définit le comportement du composant, incluant les propriétés et les méthodes.\n*\tObservable olympics$ : Gère les données asynchrones des pays olympiques.\n*\tInjection de OlympicService : Fournit les données nécessaires au composant\n* ngOnInit : Initialise le composant en s'abonnant aux données olympiques\n\n* Le symbole $ après le nom olympics dans olympics$ est une convention de nommage couramment utilisée dans la communauté Angular et RxJS pour indiquer qu'une variable est un Observable.\n\n* \nCe composant, en résumé, est conçu pour afficher des données olympiques en s'abonnant à un service qui les fournit via un Observable.\n\n*/","<div class=\"homePage\">\n\t<div class=\"pageTitle\"><h1>Medals per Country</h1></div>\n\t<div *ngIf=\"isLoading\">\n\t<div class=\"pageAllSubtitles\">\n\t\t<div class=\"pageSubtitle\">\n\t\t\t<div>Number of JOs</div>\n\t\t\t<div class=\"numberOfSubtitle\">{{ numberOfJOs }}</div>\n\t\t</div>\n\n\t\t<div class=\"pageSubtitle\">\n\t\t\t<div>Number of countries</div>\n\t\t\t<div class=\"numberOfSubtitle\">{{ numberOfCountries }}</div>\n\t\t</div>\n\t</div>\n\t<div *ngFor=\"let country of olympics$ | async\"></div>\n\n\t<ngx-charts-pie-chart\n\t\t*ngIf=\"chartData\"\n\t\t[results]=\"chartData\"\n\t\t[view]=\"[1050, 600]\"\n\t\t[legend]=\"false\"\n\t\t[labels]=\"true\"\n\t\t[trimLabels]=\"false\"\n\t\t[animations]=\"false\"\n\t\t[autoScale]=\"true\"\n\t\t[tooltipTemplate]=\"tooltipTemplate\"\n\t\t[tooltipText]=\"tooltipText\"\n\t\t(select)=\"onChartClick($event)\">\n\t\t<ng-template #tooltipTemplate let-model=\"model\">\n\t\t\t<div class=\"tooltip\">\n\t\t\t\t<div>{{ model.name }}</div>\n\n\t\t\t\t<div class=\"tooltipCenter\">\n\t\t\t\t\t<img src=\"/assets/img/award-solid-white.svg\" alt=\"award\" class=\"white-icon\" />\n\t\t\t\t\t{{ model.value }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ng-template>\n\t</ngx-charts-pie-chart>\n</div>\n\n<!--L'expression let country of (olympics$ | async) crée une variable locale country pour chaque itération, \n    qui représente l'objet courant du tableau olympics$.-->\n"]},"metadata":{},"sourceType":"module"}